= Entando 6 cluster citizens
:toc:

== Purpose
Purpose of this guide is to give an overview of the members of an Entando 6 cluster and their role

== Prerequisites

* None

== Architecture diagram
Let's start with a picture of an Entando6 cluster and how the various members interact with each other

.Entando6 cluster architecture diagram
image::Entando-cluster-overview.png[Entando6 cluster architecture diagram]

== Members of the cluster

An Entando 6 cluster is compose of various citizen which interact with each other. Most of these citizens have a Custom Resource Definition file associated and are deployable on K8S thanks to the Entando operator and controllers

=== Entando App
An EntandoApp is composed of three parts:

1. *App-builder*: the replacement for the admin-console and entry-point to customize and build an entando application and interact with digital-exhange
2. *Entando core*: the backend layer with the APIs to leverage Entando functionalities
3. *Entando component manager*: the service providing the digital-exchange functionalities, e.g. listing the available bundles, install/uninstall a bundle, etc. Check the <<ecm-section,dedicated section>> for more details

The interaction between these three components (and the rest of the Entando cluster) use the authorization/authentication features provided by Keycloak.

[[ecm-section]]
=== Entando component manager
As briefly introuced before, the Entando component manager is able to list the EntandoDeBundles accessible from the EntandoApp and provide the install/uninstall functionalities to install a bundle on an EntandoApp. All of these functionalities are made possible by the communication with the Entando k8s service, the only service of the entando ecosystem (other than the operator itself) able to interact with the cluster and some of the Entando custom resources. 

=== Entando k8s service
The Entando k8s service is part of the Entando cluster infrastructure custom resource and provides an access point to some of the custom resources defined by entando, in particular

* Entando applications
* Entando plugins
* Entando links
* Entando digital-exchange bundles

Some of the main functionalities of the Entando k8s service are:

* Provide a list of the available EntandoDeBundles to the component-manager
* Deploy a plugin during the installation of a bundle or discovery an already available plugin to expose that to an app
* Create a link between and EntandoApp and an EntandoPlugin to expose the plugin's APIs to the EntandoApp and the micro-frontends (MFEs)

=== EntandoDeBundles
An EntandoDeBundle - or digital-exchange bundle - is a package with a set of Entando components and resources. The Entando component manager is able to read these kind of packages and install the components to extend the functionalities of an EntandoApp.
For more details on the EntandoDeBundle and the digital-exchange , check the link:../digital-exchange/digital-exchange-overview.adoc[digital-exchange overview] documentation

=== Entando Plugin
An EntandoPlugin is a microservice that exposes some APIs reusable by one or more EntandoApps. Usually the plugin functionalities are exposed to the Entando developer and the end users via micro-frontends. Check the link:../microfrontends[micro-frontends] guides for more details about them.
You can quickly generate an Entando plugin using the (to-complete link:../blueprint) Entando JHipster's blueprint. The generated project will be ready to work in an entando environment, by providing the integration with Keycloak, generating a set of default micro-frontends and with the logic to expose the plugin and it's micro-frontends via an EntandoDeBundle (check the references for details)

=== Keyclaok
Keycloak in Entando 6 is responsible for all the authorization and authentication functionalities. 
All the members of an Entando 6 cluster interact with keycloak to verify user/service authorization to perform a specific task. Check out the refereces for more details on keycloak



== References

* link:../digital-exchange/digital-exchange-overview.adoc[Digital-exchange overview]
* link:../digital-exchange/tutorials/from-blueprint-to-digital-exchange-bundle/README.adoc[Tutorial: From blueprint to the digital-exchange bundle]
* link:../microfrontes/create-react-microfrontend-widget.adoc[Create a micro-frontend with React]

* To complete - reference to the blueprint
* To complete - reference to keycloak overview